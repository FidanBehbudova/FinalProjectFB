@using FinalProjectFb.Application.ViewModels
@model HomeVM
@{
    ;
}
<main>

    <!-- slider Area Start-->
    <div class="slider-area ">
        <!-- Mobile Menu -->
        <div class="slider-active">
            <div class="single-slider slider-height d-flex align-items-center" data-background="assets/img/hero/h1_hero.jpg">
                <div class="container">
                    <div class="row">
                        <div class="col-xl-6 col-lg-9 col-md-10">
                            <div class="hero__caption">
                                <h1>Maybe your dream job is here</h1>
                            </div>
                        </div>
                    </div>
                    <!-- Search Box -->
                    <div class="row">
                        <div class="col-xl-8">
                            <!-- form -->
                            <form action="#" class="search-box">
                                <div class="input-form">
                                    <input type="text" placeholder="Job Tittle or keyword">
                                </div>
                                <div class="search-form">
                                    <a href="#">Find job</a>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- slider Area End-->
    <!-- Our Services Start -->
    <div class="our-services section-pad-t30">
        <div class="container">
            <!-- Section Tittle -->
            <div class="row">
                <div class="col-lg-12">
                    <div class="section-tittle text-center">                      
                        <h2>Categories </h2>
                    </div>
                </div>
            </div>
            <div class="row d-flex justify-contnet-center">

                @{
                    var firstEightCategories = Model.Categories.Take(8);

                    foreach (var item in firstEightCategories)
                    {
                        <div class="col-xl-3 col-lg-3 col-md-4 col-sm-6">
                            <div class="single-services text-center mb-30">
                                <div class="services-ion">
                                    <span class="@item.Icon"></span>
                                </div>
                                <div class="services-cap">
                                    <h5><a href="job_listing.html">@item.Name</a></h5>
                                    <span>@item.Jobs.Count</span>
                                </div>
                            </div>
                        </div>
                    }
                }
            </div>
            <!-- More Btn -->
            <!-- Section Button -->
            <div class="row">
                <div class="col-lg-12">
                    <div class="browse-btn2 text-center mt-50">
                        <a href="job_listing.html" class="border-btn2">Browse All Sectors</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Our Services End -->
    <!-- Featured_job_start -->
    <section class="featured-job-area feature-padding">
        <div class="container">
            <!-- Section Tittle -->
            <div class="row">
                <div class="col-lg-12">
                    <div class="section-tittle text-center">
                        
                        <h2>Latest Added jobs</h2>
                    </div>
                </div>
            </div>
            <div class="row justify-content-center">
                <div class="col-xl-10">
                    <!-- single-job-content -->
                    @{
                        var latestJobs = Model.Jobs.OrderByDescending(j => j.CreatedAt).Take(5);
                    }

                    @foreach (var item in latestJobs)
                    {
                        <div class="single-job-items mb-30">
                            <!-- Diğer HTML kodları buraya eklenecek -->
                            <div class="job-items">
                                <div class="company-img">
                                    <a asp-action="detail" asp-controller="job" asp-route-id="@item.Id"><img style="height:80px;width:80px" src="~/assets/img/icon/@item.Images.FirstOrDefault()?.Url" alt=""></a>
                                </div>
                                <div class="job-tittle">
                                    <a asp-action="detail" asp-controller="job" asp-route-id="@item.Id"><h4>@item.Name</h4></a>
                                    <ul>
                                        <li>@item.Category.Name</li>
                                        <li><i class="fas fa-map-marker-alt"></i>@item.Company.CompanyCities.FirstOrDefault(c => c.City.Id == c.CityId)?.City.Name</li>
                                        <li>$@item.Salary</li>
                                    </ul>
                                </div>
                            </div>
                            <div class="items-link f-right">
                                <a asp-action="detail" asp-controller="job" asp-route-id="@item.Id">@item.JobNature</a>
                                <span>
                                    @{
                                        TimeSpan difference = DateTime.Now - item.CreatedAt;

                                        string timedifference = "";
                                        if (difference.TotalDays >= 1)
                                        {
                                            timedifference = $"{(int)difference.TotalDays} days ago";
                                        }
                                        else if (difference.TotalHours >= 1)
                                        {
                                            timedifference = $"{(int)difference.TotalHours} hours ago";
                                        }
                                        else
                                        {
                                            timedifference = $"{(int)difference.TotalMinutes} minutes ago";
                                        }
                                    }

                                    @timedifference
                                </span>
                            </div>
                        </div>
                    }

                    @* @foreach (var item in Model.Jobs)
                    {
                        <div class="single-job-items mb-30">
                            <div class="job-items">
                                <div class="company-img">
                                    <a asp-action="detail" asp-controller="job" asp-route-id="@item.Id"><img style="height:80px;width:80px" src="~/assets/img/icon/@item.Images.FirstOrDefault()?.Url" alt=""></a>
                                </div>
                                <div class="job-tittle">
                                    <a asp-action="detail" asp-controller="job" asp-route-id="@item.Id"><h4>@item.Name</h4></a>
                                    <ul>
                                        <li>@item.Category.Name</li>
                                        <li><i class="fas fa-map-marker-alt"></i>@item.Company.CompanyCities.FirstOrDefault(c=>c.City.Id==c.CityId)?.City.Name</li>
                                        <li>$@item.Salary</li>
                                    </ul>
                                </div>
                            </div>
                            <div class="items-link f-right">
                                <a asp-action="detail" asp-controller="job" asp-route-id="@item.Id">@item.JobNature</a>
                                <span>
                                    @{
                                        TimeSpan difference = DateTime.Now - item.CreatedAt;

                                        string timedifference = "";
                                        if (difference.TotalDays >= 1)
                                        {
                                            timedifference = $"{(int)difference.TotalDays} days ago";
                                        }
                                        else if (difference.TotalHours >= 1)
                                        {
                                            timedifference = $"{(int)difference.TotalHours} hours ago";
                                        }
                                        else
                                        {
                                            timedifference = $"{(int)difference.TotalMinutes} minutes ago";
                                        }
                                    }

                                    @timedifference

                                </span>
                            </div>
                        </div>
                    } *@
                 
                </div>
            </div>
        </div>
    </section>
    <!-- Featured_job_end -->
    <!-- How  Apply Process Start-->
    <div class="apply-process-area apply-bg pt-150 pb-150" data-background="assets/img/gallery/how-applybg.png">
        <div class="container">
            <!-- Section Tittle -->
            <div class="row">
                <div class="col-lg-12">
                    <div class="section-tittle white-text text-center">                       
                        <h2> Companies</h2>
                    </div>
                </div>
            </div>
            <!-- Apply Process Caption -->
            <div class="row">
                @foreach (var item in Model.Companies.Where(c=>c.IsDeleted==false))
                {
                    <div class="col-lg-4 col-md-6">
                        <div class="single-process text-center mb-30">
                            <div class="company-img" style="border-radius: 50%; overflow: hidden; height: 150px; width: 150px; margin: auto;">
                                @if (item != null && item.Images != null && item.Images.Any())
                                {
                                    <a asp-action="detail" asp-controller="company" asp-route-id="@item.Id"><img style="width: 100%; height: 100%; object-fit: cover;" src="~/assets/img/icon/@item.Images.FirstOrDefault()?.Url" alt=""></a>
                                }
                                else
                                {
                                    
                                }

                            </div>
                            <br />
                            <div class="process-cap">
                                <h5>@item.Name</h5>
                                <a href="job_details.html">Read More</a>
                            </div>
                        </div>
                    </div>

                }
                
            </div>
        </div>
    </div>
    <!-- How  Apply Process End-->
    <!-- Testimonial Start -->
    <div class="testimonial-area testimonial-padding">
        <div class="container">
            <!-- Testimonial contents -->
            <div class="row d-flex justify-content-center">
                <div class="col-xl-8 col-lg-8 col-md-10">
                    <div class="h1-testimonial-active dot-style">
                        <!-- Single Testimonial -->
                        <div class="single-testimonial text-center">
                            <!-- Testimonial Content -->
                            <div class="testimonial-caption ">
                                <!-- founder -->
                                <div class="testimonial-founder  ">
                                    <div class="founder-img mb-30">
                                        <img src="~/assets/img/testmonial/testimonial-founder.png" alt="">
                                        <span>Margaret Lawson</span>
                                        <p>Creative Director</p>
                                    </div>
                                </div>
                                <div class="testimonial-top-cap">
                                    <p>“I am at an age where I just want to be fit and healthy our bodies are our responsibility! So start caring for your body and it will care for you. Eat clean it will care for you and workout hard.”</p>
                                </div>
                            </div>
                        </div>
                        <!-- Single Testimonial -->
                        <div class="single-testimonial text-center">
                            <!-- Testimonial Content -->
                            <div class="testimonial-caption ">
                                <!-- founder -->
                                <div class="testimonial-founder  ">
                                    <div class="founder-img mb-30">
                                        <img src="~/assets/img/testmonial/testimonial-founder.png" alt="">
                                        <span>Margaret Lawson</span>
                                        <p>Creative Director</p>
                                    </div>
                                </div>
                                <div class="testimonial-top-cap">
                                    <p>“I am at an age where I just want to be fit and healthy our bodies are our responsibility! So start caring for your body and it will care for you. Eat clean it will care for you and workout hard.”</p>
                                </div>
                            </div>
                        </div>
                        <!-- Single Testimonial -->
                        <div class="single-testimonial text-center">
                            <!-- Testimonial Content -->
                            <div class="testimonial-caption ">
                                <!-- founder -->
                                <div class="testimonial-founder  ">
                                    <div class="founder-img mb-30">
                                        <img src="~/assets/img/testmonial/testimonial-founder.png" alt="">
                                        <span>Margaret Lawson</span>
                                        <p>Creative Director</p>
                                    </div>
                                </div>
                                <div class="testimonial-top-cap">
                                    <p>“I am at an age where I just want to be fit and healthy our bodies are our responsibility! So start caring for your body and it will care for you. Eat clean it will care for you and workout hard.”</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Testimonial End -->
    <!-- Support Company Start-->
    <div class="support-company-area support-padding fix">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-xl-6 col-lg-6">
                    <div class="right-caption">
                        <!-- Section Tittle -->
                        <div class="section-tittle section-tittle2">
                            <span>What we are doing</span>
                            <h2>24k Talented people are getting Jobs</h2>
                        </div>
                        <div class="support-caption">
                            <p class="pera-top">Mollit anim laborum duis au dolor in voluptate velit ess cillum dolore eu lore dsu quality mollit anim laborumuis au dolor in voluptate velit cillum.</p>
                            <p>Mollit anim laborum.Duis aute irufg dhjkolohr in re voluptate velit esscillumlore eu quife nrulla parihatur. Excghcepteur signjnt occa cupidatat non inulpadeserunt mollit aboru. temnthp incididbnt ut labore mollit anim laborum suis aute.</p>
                            <a href="about.html" class="btn post-btn">Post a job</a>
                        </div>
                    </div>
                </div>
                <div class="col-xl-6 col-lg-6">
                    <div class="support-location-img">
                        <img src="~/assets/img/service/support-img.jpg" alt="">
                        <div class="support-img-cap text-center">
                            <p>Since</p>
                            <span>1994</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Support Company End-->
    <!-- Blog Area Start -->
    <div class="home-blog-area blog-h-padding">
        <div class="container">
            <!-- Section Tittle -->
            <div class="row">
                <div class="col-lg-12">
                    <div class="section-tittle text-center">
                        <span>Our latest blog</span>
                        <h2>Our recent news</h2>
                    </div>
                </div>
            </div>
           
        </div>
    </div>
    <!-- Blog Area End -->

</main>